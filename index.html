<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Sex o Pol â€“ Velg brett</title>

<style>
  html, body{
    margin:0; padding:0;
    width:100vw; height:100dvh;
    background:#000; color:#fff;
    font-family:Arial, sans-serif;
    overflow:hidden;
    -webkit-tap-highlight-color: transparent;
  }

  /* Roter-til-liggende overlay */
  #rotateWarning{
    position: fixed;
    inset: 0;
    background: #000;
    color: #fff;
    display: none;
    justify-content: center;
    align-items: center;
    font-size: 22px;
    z-index: 999;
    text-align: center;
    padding: 24px;
  }

  #wrap{
    height:100dvh;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    gap:12px;
    padding:18px;
    box-sizing:border-box;
  }

  h1{
    margin:0;
    font-size:26px;
    text-align:center;
  }

  /* Preview "card" (mindre enn fÃ¸r) */
  #previewCard{
    width: min(70vw, 520px);   /* ðŸ‘ˆ mindre */
    border-radius:16px;
    background:#111;
    padding:12px;
    box-sizing:border-box;
    border:1px solid rgba(255,255,255,0.08);
  }

  /* Preview-ramme (lavere) */
  #previewFrame{
    width:100%;
    aspect-ratio: 21 / 9;      /* ðŸ‘ˆ mindre hÃ¸yde, mer widescreen */
    border-radius:12px;
    overflow:hidden;
    background:#000;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  /* "contain" = full oversikt, ingen crop */
  #previewImg{
    width:100%;
    height:100%;
    object-fit: contain;
    display:block;
    user-select:none;
    -webkit-user-drag:none;
    touch-action: pan-y;
  }

  #boardLabel{
    margin-top:10px;
    font-size:15px;
    opacity:.85;
    text-align:center;
  }

  #hint{
    font-size:12px;
    opacity:.6;
    text-align:center;
  }

  #dots{
    display:flex;
    gap:8px;
    justify-content:center;
    margin-top:10px;
  }
  .dot{
    width:8px; height:8px; border-radius:50%;
    background:#555;
  }
  .dot.active{ background:#4da6ff; }

  .actions{
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:center;
  }

  button{
    padding:14px 22px;
    font-size:18px;
    border-radius:12px;
    border:none;
    font-weight:bold;
    cursor:pointer;
    min-height:54px;
  }
  #startBtn{
    background:#4da6ff;
    color:#fff;
  }
  #startBtn:active{ transform:scale(.97); }

  .navBtn{
    background:#222;
    color:#fff;
    padding:14px 16px;
    min-width:54px;
  }
  .navBtn:active{ transform:scale(.97); }
</style>
</head>

<body>

<!-- Krev liggende ogsÃ¥ i menyen -->
<div id="rotateWarning">
  ðŸ”„ Snu telefonen til liggende for Ã¥ velge brett
</div>

<div id="wrap">
  <h1>Velg spillebrett</h1>

  <div id="previewCard">
    <div id="previewFrame">
      <img id="previewImg" src="board.png" alt="Preview">
    </div>

    <div id="boardLabel"></div>
    <div id="hint">Sveip pÃ¥ bildet for Ã¥ bytte brett</div>

    <div id="dots"></div>
  </div>

  <div class="actions">
    <button class="navBtn" onclick="prevBoard()">â—€</button>
    <button id="startBtn" onclick="startGame()">Start spill</button>
    <button class="navBtn" onclick="nextBoard()">â–¶</button>
  </div>
</div>

<script>
  /* Roter-sjekk (mer stabil enn innerHeight/innerWidth) */
  function checkOrientationMenu(){
    const warning = document.getElementById("rotateWarning");
    const isPortrait = window.matchMedia("(orientation: portrait)").matches;
    warning.style.display = isPortrait ? "flex" : "none";
  }
  window.addEventListener("resize", checkOrientationMenu);
  checkOrientationMenu();

  const boards = [
    {name:"Original", file:"board.png"},
    {name:"GrÃ¸nn/Lilla/BlÃ¥", file:"board2.png"},
    {name:"Lilla/GrÃ¸nn/Gul", file:"board3.png"},
    {name:"Lilla/Gul", file:"board4.png"},
    {name:"BlÃ¥/Gul", file:"board5.png"},
    {name:"LyseblÃ¥/Gul", file:"board6.png"},
    {name:"GrÃ¸nn/Gul", file:"board7.png"}
  ];

  let index = 0;

  const img = document.getElementById("previewImg");
  const label = document.getElementById("boardLabel");
  const dotsWrap = document.getElementById("dots");

  // dots
  boards.forEach(() => {
    const d = document.createElement("div");
    d.className = "dot";
    dotsWrap.appendChild(d);
  });

  function updateUI(){
    img.src = boards[index].file;
    label.textContent = boards[index].name;

    document.querySelectorAll(".dot").forEach((d,i)=>{
      d.classList.toggle("active", i === index);
    });
  }

  function nextBoard(){
    index = (index + 1) % boards.length;
    updateUI();
  }
  function prevBoard(){
    index = (index - 1 + boards.length) % boards.length;
    updateUI();
  }

  // swipe
  let startX = 0;
  img.addEventListener("touchstart", e=>{
    startX = e.changedTouches[0].screenX;
  }, {passive:true});

  img.addEventListener("touchend", e=>{
    const diff = e.changedTouches[0].screenX - startX;
    if (diff < -50) nextBoard();
    else if (diff > 50) prevBoard();
  }, {passive:true});

  function startGame(){
    const chosen = boards[index].file;
    window.location.href = "game.html?board=" + encodeURIComponent(chosen);
  }

  // fallback hvis noen filer mangler
  img.onerror = () => {
    img.src = "board.png";
  };

  updateUI();
</script>

</body>
</html>
