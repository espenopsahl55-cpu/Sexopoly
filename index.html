<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no">
<title>Sex o Pol</title>

<style>

/* ===== BASE ===== */
html, body {
  margin: 0;
  padding: 0;
  width: 100vw;
  height: 100dvh;
  background: #000;
  font-family: Arial, sans-serif;
  color: white;
  overflow: hidden;
  -webkit-tap-highlight-color: transparent;
  overscroll-behavior: none;
}

* {
  box-sizing: border-box;
  touch-action: manipulation;
}

body {
  display: flex;
}

/* ===== LAYOUT ===== */
#gameWrapper {
  width: 100vw;
  height: 100dvh;
  display: flex;
  flex-direction: row;
}

/* ===== BOARD ===== */
#board {
  flex: 1740;
  height: 100dvh;
  background: url("board.png") no-repeat left center;

  /* üî• KUTTER 200px AV H√òYRESIDEN AV BILDET */
  background-size: calc(100% + 200px) 100%;
  background-position: left center;

  position: relative;
  flex-shrink: 0;
}

/* ===== UI ===== */
#sideUI {
  flex: 816;
  height: 100dvh;
  padding: 18px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  background: #000;
}
/* ===== SPILLERBRIKKER ===== */
.player {
  position: absolute;
  width: 4vh;
  height: 4vh;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition: left 0.25s ease, top 0.25s ease;
  z-index: 10;
  border: 2px solid #fff;
}

/* ‚ú® ACTIVE GLOW */
.player.active {
  box-shadow:
    0 0 12px gold,
    0 0 24px gold,
    0 0 36px rgba(255,215,0,0.9);
}
#p1 { background: #ff4d4d; }
#p2 { background: #4da6ff; }

/* ===== UI STYLE ===== */
input, button {
  padding: 12px;
  font-size: 18px;
  border-radius: 10px;
  border: none;
}

input { width: 100%; }

button {
  cursor: pointer;
  font-weight: bold;
  min-height: 60px;
  background: #4da6ff;
  color: white;
}

button:active { transform: scale(0.97); }

#infoBtn {
  min-height: 36px;       /* mindre h√∏yde */
  font-size: 14px;        /* mindre tekst */
  padding: 6px 10px;      /* mindre padding */
  background: #888;       /* m√∏rkere gr√•, valgfritt */
  color: white;
  border-radius: 6px;
}

#dice {
  display: flex;
  gap: 20px;
  font-size: 42px;
  justify-content: center;
}

#scores { font-size: 20px; }

#turnIndicator {
  font-weight: bold;
  text-align: center;
  font-size: 20px;
}

/* ===== KORT ===== */
/* Fade-in / fade-out kort */
#card {
  opacity: 0;
  transition: opacity 0.3s ease;
}

#card.show {
  display: flex;
  opacity: 1;
}

/* Typewriter tekst */
.typewriter {
  display: inline-block;
  overflow: hidden;
  white-space: nowrap;
  border-right: 2px solid white;
  animation: blink 0.7s infinite;
}

@keyframes blink {
  0%, 100% { border-color: white; }
  50% { border-color: transparent; }
}

  
#card {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.9);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 50;
}

#cardContent {
  background: #111;
  padding: 30px;
  max-width: 80vw;
  border-radius: 14px;
  text-align: center;
}

/* ===== ROTASJON ADVARSEL ===== */
#rotateWarning {
  position: fixed;
  inset: 0;
  background: black;
  color: white;
  display: none;
  justify-content: center;
  align-items: center;
  font-size: 22px;
  z-index: 100;
}
@keyframes wildShake {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(3deg); }
  50% { transform: rotate(-3deg); }
  75% { transform: rotate(3deg); }
  100% { transform: rotate(0deg); }
}

@keyframes wildFlip {
  0% { perspective: 600px; transform-style: preserve-3d; rotateY(0deg); }
  50% { rotateY(180deg); }
  100% { rotateY(0deg); }
}

#card.wild #cardContent {
  animation: wildShake 0.5s infinite alternate, wildFlip 1.5s infinite alternate;
}
</style>
</head>

<body>

<div id="rotateWarning">
  üîÑ Snu telefonen til liggende for √• spille
</div>

<div id="gameWrapper">

  <div id="board">
    <div id="p1" class="player"></div>
    <div id="p2" class="player"></div>
  </div>

  <div id="sideUI">

    <div>
      <input id="name1Input" placeholder="Spiller 1" autocomplete="off" />
      <input id="name2Input" placeholder="Spiller 2" autocomplete="off" />
    </div>

    <div id="scores">
      <div id="score1"></div>
      <div id="score2"></div>
    </div>

    <div id="turnIndicator"></div>

    <div id="dice">
      <div id="d1">üé≤</div>
      <div id="d2">üé≤</div>
    </div>

   <button id="rollBtn" onclick="roll()">Kast terning</button>
  <button id="infoBtn" onclick="showInfo()">(?)</button>
  
</div>

<div id="card" onclick="closeCard()">
  <div id="cardContent">
    <div id="cardText"></div>
    <p><small>(Trykk for √• fortsette)</small></p>
  </div>
</div>

<script>

/* ===== ROTASJONSSJEKK ===== */
function checkOrientation() {
  const warning = document.getElementById("rotateWarning");
  if (window.innerHeight > window.innerWidth) {
    warning.style.display = "flex";
  } else {
    warning.style.display = "none";
  }
}
window.addEventListener("resize", checkOrientation);
checkOrientation();

/* ===== KONSTANTER ===== */
const JAIL_POS = 19; // <-- oppdatert (forklart under)

const tiles = [

  // ===== TOP (8) =====
  {x:15,    y:14.5,type:"start"},
  {x:25.86, y:14.5,type:"lust_or_dare"},
  {x:36.71, y:14.5,type:"drink",amount:2},
  {x:47.57, y:14.5,type:"nothing"},
  {x:58.43, y:14.5,type:"2points"},
  {x:69.29, y:14.5,type:"dare"},
  {x:80.14, y:14.5,type:"lust"},
  {x:91,    y:14.5,type:"go_jail"},

  // ===== RIGHT (4) =====
  {x:91, y:28.8,type:"2points"},
  {x:91, y:43.1,type:"nothing"},
  {x:91, y:57.4,type:"give2"},
  {x:91, y:71.7,type:"park"},

  // ===== BOTTOM (8) =====
  {x:91,    y:86,type:"spotify"},
  {x:80.14, y:86,type:"klesplagg"},
  {x:69.29, y:86,type:"lust"},
  {x:58.43, y:86,type:"dare"},
  {x:47.57, y:86,type:"give2"},
  {x:36.71, y:86,type:"dare"},
  {x:25.86, y:86,type:"lust_or_dare"}, // <-- ny 24-rute du manglet
  {x:15,    y:86,type:"jail"},

  // ===== LEFT (4) =====
  {x:15, y:71.7,type:"bestem"},
  {x:15, y:57.4,type:"2points"},
  {x:15, y:43.1,type:"drink",amount:2},
  {x:15, y:28.8,type:"lust_or_dare"}
];


const lustCards = [
  "Kyss partneren i 20 sekunder",
  "Mass√©r l√•rene i 1 minutt",
  "Hvisk noe skittent",
  "Gjett favoritt reisem√•l ‚Äì feil: drikk 2 slurker",
  "Stryk hendene p√• et valgfritt sted p√• partner i 30 sek",
  "Si favoritt sexstilling",
  "F√• et kyss et sted du velger",
  "Velg hvem som tar av et plagg",
  "Klin i 30 sek ‚Äì ta av partner 1 plagg",
  "Fortell hvor du √∏nsker √• ha sex",
  "Hva var mest attraktivt ved f√∏rste m√∏te?",
  "Stirr i √∏ynene 30 sek mens du koser l√•ret",
  "Fortell favorittegenskaper",
  "Kyss halsen i 30 sek",
  "Nevn 2 ting som tenner deg",
  "Sitt i fanget til partner √©n runde",
  "Masser rumpa til partner i 30sek",
  "Reis dere opp og dans swing i 2 minutter",
  "Hva er ditt favoritt brettspill?",
  "Hvor h√∏y er sex lysta di?",
  "Liker du √• eksperimentere rundt sex?",
  "hva ville du helst: sex i bilen, skogen eller stranda?"
];

const dareCards = [
   "Ta av ett plagg",
  "Drikk 3 slurker",
  "La partneren velge neste kort",
  "Slikk partner et sted du √∏nsker",
  "Tease i 40 sek ‚Äì partner drikker 3 slurker",
  "Stimuler partner nedentil i 30 sek",
  "Gi en lap dance i 40 sek",
  "Hvis naken: valgfri stilling i 3 min ‚Äì ellers 5 slurker",
  "Bind for √∏ynene ‚Äì partner overrasker i 1 min",
  "Ta av 3 plagg og ta 2 slurker",
  "Slikk nippelen til partner i 15 sekund",
  "Kyss partnerens mage og bryst i 45 sek.",
  "Masser rumpa til partner i 30sek",
  "Sitt naken p√• partners fang i 1 minutt",
  "Stryk hendene p√• et valgfritt sted p√• partner i 30 sek",
  "Velg hvem som tar av et plagg",
  "Klin i 30 sek ‚Äì ta av partner 1 plagg",
  "Bli bedre kjent, hold h√•nda nedi trusa/bokseren til partner i 1 runde" "Ta av ett plagg","Drikk 3 slurker","La partneren velge neste kort",
  "Slikk partner et sted du √∏nsker","Tease i 40 sek ‚Äì partner drikker 3 slurker",
  "Stimuler partner nedentil i 30 sek","Gi en lap dance i 40 sek",
  "Hvis naken: valgfri stilling i 3 min ‚Äì ellers 5 slurker",
  "Bind for √∏ynene ‚Äì partner overrasker i 1 min","Ta av 3 plagg og ta 2 slurker"
];
let players = [
 {pos:0, el:null, name:"Spiller 1", jailed:false, jailAttempts:0, jailFreeTurn:false, points:0, laps:0},
 {pos:0, el:null, name:"Spiller 2", jailed:false, jailAttempts:0, jailFreeTurn:false, points:0, laps:0}
];
const wildCards = [
  "Alle tar 2 slurker üç∫",
  "Bytt plass med partner üîÑ",
  "F√• 3 poeng ekstra ‚≠ê",
  "Trekke Dare eller Lust for begge üî•",
  "Neste runde dobbel terning üé≤"
];
let current = 0;
let locked = false;
let winner = null;

players[0].el = document.getElementById("p1");
players[1].el = document.getElementById("p2");

const score1 = document.getElementById("score1");
const score2 = document.getElementById("score2");
const turnIndicator = document.getElementById("turnIndicator");
const d1 = document.getElementById("d1");
const d2 = document.getElementById("d2");
const diceFaces = ["‚öÄ","‚öÅ","‚öÇ","‚öÉ","‚öÑ","‚öÖ"];
const card = document.getElementById("card");
const cardText = document.getElementById("cardText");
const name1Input = document.getElementById("name1Input");
const name2Input = document.getElementById("name2Input");
/* ===== ACTIVE PLAYER GLOW ===== */
function updateActiveGlow() {
  players.forEach(p => p.el.classList.remove("active"));
  players[current].el.classList.add("active");
}
function showInfo() {
  const infoText = `
    2 poeng: Massasje<br>
    4 poeng: Velg om partner skal trekke Dare eller Lust<br>
    7 poeng: Partner m√• ta av 1 plagg
  `;
  showCard("‚ÑπÔ∏è Poeng-info", infoText);
}
function place(p) {
  const board = document.getElementById("board");
  const t = tiles[p.pos];
  p.el.style.left = (board.clientWidth * t.x / 100) + "px";
  p.el.style.top = (board.clientHeight * t.y / 100) + "px";
}
function showWildCard() {
  locked = true; // üîí L√•s spillet mens kortet vises
  const text = draw(wildCards);

  cardText.innerHTML = `
    <h2>üé≤ Wild Card!</h2>
    <p>${text}</p>
    <p><small>(Trykk kortet for √• fortsette)</small></p>
  `;

  card.style.display = "flex";
  card.classList.add("show", "wild");

  // ‚ú® Legg til risting og snurring
  cardContent.style.animation = "wildShake 1s infinite alternate, wildFlip 1s infinite alternate";
}
function updateScores() {
  score1.textContent = `${players[0].name}: ${players[0].points} ‚≠ê`;
  score2.textContent = `${players[1].name}: ${players[1].points} ‚≠ê`;
}

function updateTurnIndicator() {
  turnIndicator.textContent = winner
    ? `üèÜ Vinner: ${winner.name}`
    : `‚û°Ô∏è Din tur: ${players[current].name}`;
}

function draw(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

function rand(n) {
  return Math.floor(Math.random() * n) + 1;
}

function animateDice(cb) {
  let rolls = 12;
  let d1val = 1, d2val = 1;

  const interval = setInterval(() => {
    d1val = rand(6);
    d2val = rand(6);
    d1.textContent = diceFaces[d1val-1];
    d2.textContent = diceFaces[d2val-1];
    rolls--;

    if (rolls === 0) {
      clearInterval(interval);
      setTimeout(() => {
        cb(d1val, d2val);
        if (navigator.vibrate) navigator.vibrate(50);
      }, 150);
    }
  }, 90);
}

function roll() {
  if (locked || winner) return;
  locked = true;

  players[0].name = name1Input.value.trim() || "Spiller 1";
  players[1].name = name2Input.value.trim() || "Spiller 2";

  updateScores();
  updateTurnIndicator();

  animateDice((d1val, d2val) => {
    const p = players[current];

if (p.jailed) {

  // üîì Skal slippe ut automatisk
  if (p.jailFreeTurn) {
    p.jailed = false;
    p.jailFreeTurn = false;

    showCard(
      "üîì Du slipper ut!",
      "Du har sonet ferdig og g√•r videre etter kastet."
    );

    move(d1val + d2val);
    return;
  }

  // ‚úÖ Fikk 6 ‚Üí slipper ut direkte
  if (d1val === 6 || d2val === 6) {
    p.jailed = false;
    p.jailAttempts = 0;

    showCard(
      "üîì Fri!",
      "Du kastet en 6-er og slipper ut av fengsel!"
    );

    move(d1val + d2val);
    return;
  }

  // ‚ùå Ingen 6
  p.jailAttempts++;

  // 1Ô∏è‚É£ Fors√∏k
  if (p.jailAttempts === 1) {
    showCard(
      "üöì Fengsel",
      "Fors√∏k 1/3 ‚Äì Ingen 6<br>Ta 2 slurker"
    );
  }

  // 2Ô∏è‚É£ Fors√∏k
  else if (p.jailAttempts === 2) {
    showCard(
      "üöì Fengsel",
      "Fors√∏k 2/3 ‚Äì Ingen 6<br>Ta 4 slurker"
    );
  }

  // 3Ô∏è‚É£ Fors√∏k ‚Üí Dare + slipper neste tur
  else if (p.jailAttempts === 3) {

    const dare = draw(dareCards);

    showCard(
      "üöì Siste fors√∏k!",
      `Fors√∏k 3/3 ‚Äì Ingen 6<br><br>
       Trekk Dare:<br><b>${dare}</b><br><br>
       Du slipper ut neste tur.`
    );

    p.jailAttempts = 0;
    p.jailFreeTurn = true; // üî• slippes ut neste tur

    endTurn();
    return;
  }

  endTurn();
  return;
}
    
    /* =========================
       üé≤ NORMAL MOVE
    ========================= */

    move(d1val + d2val);

  }); // lukker animateDice
}     // lukker roll()
    /* =========================
       üé≤ NORMAL MOVE
    ========================= */
function move(steps) {
  const p = players[current];
  let moved = 0;

  const stepAnim = setInterval(() => {
    const oldPos = p.pos;
    p.pos = (p.pos + 1) % tiles.length;

    if (oldPos === tiles.length - 1 && p.pos === 0) {
      p.laps++;
      if (p.laps === 6 && !winner) {
        winner = p;
        showCard("üéÜ Gratulerer!", `${p.name} har vunnet!`);
        clearInterval(stepAnim);
        updateTurnIndicator();
        return;
      }
    }

    place(p);

    moved++;
    if (moved >= steps) {
      clearInterval(stepAnim);
      resolve(tiles[p.pos]);
    }
  }, 300);
}

function resolve(tile) {
  const p = players[current];
// Hvis begge er p√• samme posisjon
if (players[0].pos === players[1].pos) {
  showWildCard();
   return; // viktig! stopper alt annet til kortet er lukket
}
  switch(tile.type) {
    case "go_jail":
      p.pos = JAIL_POS;
      p.jailed = true;
      p.jailAttempts = 0;
      p.jailFreeTurn = false; // üî• viktig reset
      place(p);
      showCard("üöì Fengsel", "Du sendes rett i fengsel!");
      break;

    case "lust_or_dare":
      showChoiceCard(p);
      break;

    case "2points":
      p.points += 2;
      updateScores();
      showCard("‚≠ê Poeng", "Du f√•r 2 poeng!");
      break;

    case "lust":
      showCard("‚≠ê Lust", draw(lustCards));
      break;

    case "dare":
      showCard("üî• Dare", draw(dareCards));
      break;

    case "drink":
      showCard("üç∫ Drikk", `Ta ${tile.amount} slurker`);
      break;

    case "back":
      showCard("‚¨Ö Tilbake", `G√• ${tile.amount} ruter tilbake`);
      p.pos = (p.pos - tile.amount + tiles.length) % tiles.length;
      place(p);
      break;
    
    case "klesplagg":
      showCard("Fjern 2 klesplaggüëñüß¶");
      break;
      
    case "park":
      showCard("gratis parkeringüöó");
      break; 

      case "spotify":
      showCard("Fyr p√• sex list√•üé∂");
      break; 

    case "bestem":
      showCard("Bestem et utfordrings kort til partnerüßë‚Äç‚öñÔ∏èüë©‚Äç‚öñÔ∏è");
      break; 
    
case "give2":
  const giver = players[current];
  const partner = players[(current+1)%players.length];
  if (giver.points >= 2) {
    giver.points -= 2;
    partner.points += 2;
    updateScores();
    showCard("üéÅ Gi poeng", `${giver.name} gir 2 poeng til ${partner.name}`);
  } else {
    showCard("üéÅ Gi poeng", `${giver.name} har ikke nok poeng til √• gi`);
  }
  break;

    default:
      endTurn();
      break;
  }
}

function showCard(title, text) {
  cardText.innerHTML = `<h2>${title}</h2><p>${text}</p><p><small>(Trykk kortet for √• fortsette)</small></p>`;
  card.style.display = "flex";
  card.classList.add("show");
  

}


function closeCard() {
  card.classList.remove("show", "wild");
  cardContent.style.animation = ""; // fjern animasjon
  setTimeout(() => {
    card.style.display = "none";
    locked = false; // üîì L√•s opp spillet
    endTurn();
  }, 300);

}
function showChoiceCard(player) {
  cardText.innerHTML = `
    <h2>Velg Lust eller Dare</h2>
    <div style="display:flex; gap:20px; justify-content:center; margin-top:20px;">
      <button onclick="chooseCard(event, 'lust')">Lust</button>
      <button onclick="chooseCard(event, 'dare')">Dare</button>
    </div>
  `;
  card.style.display = "flex";
  card.classList.add("show");
}
function chooseCard(e, type) {
  e.stopPropagation(); // üî• stopper kortet fra √• lukke seg

  const text = type === "lust" ? draw(lustCards) : draw(dareCards);

  cardText.innerHTML = `
    <h2>${type === "lust" ? "‚≠ê Lust" : "üî• Dare"}</h2>
    <p>${text}</p>
    <p><small>(Trykk kortet for √• fortsette)</small></p>
  `;
}

  


function endTurn() {
  if (winner) return;
  current = (current + 1) % players.length;
  locked = false;
  updateTurnIndicator();
  updateActiveGlow();
}

players.forEach(place);
updateScores();
updateTurnIndicator();
updateActiveGlow();   
  
players.forEach(place);
updateScores();
updateTurnIndicator();
updateActiveGlow();   // <-- LEGG TIL
</script>

<!-- üé∑ BAKGRUNNSMUSIKK -->
<audio id="bgMusic" src="jazz.mp3" loop></audio>

<script>
  document.body.addEventListener("click", function startMusic() {
    const music = document.getElementById("bgMusic");
    music.volume = 0.3; 
    music.play();
    document.body.removeEventListener("click", startMusic);
  });
</script>
</body>
</html> 




