<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<title>Sex o Pol</title>

<style>
body{
  margin:0;
  background:#000;
  font-family: Arial, sans-serif;
  color:white;
  display:flex;
  justify-content:center;
  align-items:flex-start;
}

/* ===== LAYOUT ===== */
#gameWrapper{
  display:flex;
  gap:20px;
  margin-top:10px;
}

/* ===== BRETT ===== */
#board{
  position:relative;
  width:950px;
  height:620px;
  background:url("board.png") center/contain no-repeat;
}

/* ===== SPILLERBRIKKER ===== */
.player{
  position:absolute;
  width:26px;
  height:26px;
  border-radius:50%;
  transition:left 0.25s linear, top 0.25s linear;
}
#p1{background:#ff4d4d;}
#p2{background:#4da6ff;}

/* ===== SIDE UI ===== */
#sideUI{
  width:260px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

input, button{
  padding:6px;
  font-size:14px;
}

button{
  cursor:pointer;
}

#dice{
  display:flex;
  gap:10px;
  font-size:28px;
}

#scores{
  font-size:16px;
}

#turnIndicator{
  font-weight:bold;
}

/* ===== KORT ===== */
#card{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  display:none;
  justify-content:center;
  align-items:center;
}

#cardContent{
  background:#111;
  padding:20px;
  max-width:420px;
  text-align:center;
  border-radius:10px;
}
</style>
</head>

<body>

<div id="gameWrapper">

  <div id="board">
    <div id="p1" class="player"></div>
    <div id="p2" class="player"></div>
  </div>

  <div id="sideUI">
    <input id="name1Input" placeholder="Spiller 1">
    <input id="name2Input" placeholder="Spiller 2">

    <div id="scores">
      <div id="score1"></div>
      <div id="score2"></div>
    </div>

    <div id="turnIndicator"></div>

    <div id="dice">
      <div id="d1">üé≤</div>
      <div id="d2">üé≤</div>
    </div>

    <button onclick="roll()">Kast terning</button>
  </div>

</div>

<!-- ===== KORT ===== -->
<div id="card" onclick="closeCard()">
  <div id="cardContent">
    <div id="cardText"></div>
    <p><small>(Klikk for √• fortsette)</small></p>
  </div>
</div>

<script>
// ===== BRETT =====
const JAIL_POS = 20;

const tiles = [
  {x:90,y:90,type:"lust"}, {x:200,y:90,type:"drink",amount:2}, {x:310,y:90,type:"nothing"}, {x:420,y:90,type:"2points"},
  {x:530,y:90,type:"back",amount:2}, {x:640,y:90,type:"drink",amount:3}, {x:750,y:90,type:"lust"}, {x:860,y:90,type:"go_jail"},
  {x:860,y:200,type:"nothing"}, {x:860,y:310,type:"drink",amount:2}, {x:860,y:420,type:"dare"}, {x:860,y:530,type:"back",amount:2},
  {x:750,y:530,type:"nothing"}, {x:640,y:530,type:"drink",amount:1}, {x:530,y:530,type:"dare"}, {x:420,y:530,type:"2points"},
  {x:310,y:530,type:"drink",amount:2}, {x:200,y:530,type:"nothing"}, {x:90,y:530,type:"dare"},
  {x:0,y:530,type:"jail"},
  {x:0,y:420,type:"2points"}, {x:0,y:310,type:"nothing"}, {x:0,y:200,type:"drink",amount:2}, {x:0,y:90,type:"start"}
];

// ===== KORT =====
const lustCards = [
  "Kyss partneren i 20 sekunder","Mass√©r l√•rene i 1 minutt","Hvisk noe skittent",
  "Gjett favoritt reisem√•l ‚Äì feil: drikk 2 slurker","Stryk hendene p√• et valgfritt sted p√• partner i 30 sek",
  "Si favoritt sexstilling","F√• et kyss et sted du velger","Velg hvem som tar av et plagg",
  "Klin i 30 sek ‚Äì ta av partner 1 plagg","Fortell hvor du √∏nsker √• ha sex",
  "Hva var mest attraktivt ved f√∏rste m√∏te?","Stirr i √∏ynene 30 sek mens du koser l√•ret",
  "Fortell favorittegenskaper","Kyss halsen i 30 sek","Nevn 2 ting som tenner deg","Sitt i fanget til partner √©n runde"
];

const dareCards = [
  "Ta av ett plagg","Drikk 3 slurker","La partneren velge neste kort",
  "Slikk partner et sted du √∏nsker","Tease i 40 sek ‚Äì partner drikker 3 slurker",
  "Stimuler partner nedentil i 30 sek","Gi en lap dance i 40 sek",
  "Hvis naken: valgfri stilling i 3 min ‚Äì ellers 5 slurker",
  "Bind for √∏ynene ‚Äì partner overrasker i 1 min","Ta av 3 plagg og ta 2 slurker"
];

function draw(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

// ===== SPILLERE =====
let players = [
  {pos:0, el:p1, name:"Spiller 1", jailed:false, jailAttempts:0, points:0, laps:0},
  {pos:0, el:p2, name:"Spiller 2", jailed:false, jailAttempts:0, points:0, laps:0}
];
let current = 0;
let locked = false;
let winner = null;

// ===== UI =====
function updateScores(){
  score1.textContent = `${players[0].name}: ${players[0].points} ‚≠ê`;
  score2.textContent = `${players[1].name}: ${players[1].points} ‚≠ê`;
}

function updateTurnIndicator(){
  turnIndicator.textContent = winner
    ? `üèÜ Vinner: ${winner.name}`
    : `‚û°Ô∏è Din tur: ${players[current].name}`;
}

// ===== TERNING =====
function animateDice(cb){
  let rolls = 10;
  let last1 = 1, last2 = 1;

  let interval = setInterval(()=>{
    last1 = rand(6);
    last2 = rand(6);
    d1.textContent = last1;
    d2.textContent = last2;
    rolls--;

    if(rolls <= 0){
      clearInterval(interval);
      cb(last1, last2);
    }
  },80);
}

// ===== SPILL =====
function roll(){
  if(locked || winner) return;
  locked = true;

  players[0].name = name1Input.value || "Spiller 1";
  players[1].name = name2Input.value || "Spiller 2";
  updateScores();
  updateTurnIndicator();

  animateDice((d1val,d2val)=>{
    let p = players[current];

    if(p.jailed){
      if(d1val === 6 || d2val === 6){
        p.jailed = false;
        p.jailAttempts = 0;
        move(d1val + d2val);
      } else {
        p.jailAttempts++;
        showCard("üöì Fengsel",`Ingen 6 ‚Äì ta ${p.jailAttempts*2} slurker`);
        endTurn();
      }
      return;
    }

    move(d1val + d2val);
  });
}

function move(steps){
  let p = players[current];
  let i = 0;

  let stepAnim = setInterval(()=>{
    let oldPos = p.pos;
    p.pos = (p.pos + 1) % tiles.length;

    if(oldPos === tiles.length-1 && p.pos === 0){
      p.laps++;
      if(p.laps === 6 && !winner){
        winner = p;
        showCard("üéÜ Gratulerer!",`${p.name} har vunnet!`);
        clearInterval(stepAnim);
        updateTurnIndicator();
        return;
      }
    }

    place(p);
    i++;
    if(i >= steps){
      clearInterval(stepAnim);
      resolve(tiles[p.pos]);
    }
  },300);
}

function place(p){
  let t = tiles[p.pos];
  p.el.style.left = t.x + "px";
  p.el.style.top = t.y + "px";
}

function resolve(tile){
  let p = players[current];

  if(tile.type === "go_jail"){
    p.pos = JAIL_POS;
    p.jailed = true;
    p.jailAttempts = 0;
    place(p);
    showCard("üöì Fengsel","Du sendes rett i fengsel!");
    return;
  }

  if(tile.type === "2points"){
    p.points += 2;
    updateScores();
    showCard("‚≠ê Poeng","Du f√•r 2 poeng!");
    return;
  }

  if(tile.type === "lust") showCard("‚≠ê Lust", draw(lustCards));
  else if(tile.type === "dare") showCard("üî• Dare", draw(dareCards));
  else if(tile.type === "drink") showCard("üç∫ Drikk",`Ta ${tile.amount} slurker`);
  else if(tile.type === "back"){
    showCard("‚¨Ö Tilbake",`G√• ${tile.amount} ruter tilbake`);
    p.pos = (p.pos - tile.amount + tiles.length) % tiles.length;
    place(p);
  } else endTurn();
}

function showCard(title,text){
  cardText.innerHTML = `<h2>${title}</h2><p>${text}</p>`;
  card.style.display="flex";
}

function closeCard(){
  card.style.display="none";
  endTurn();
}

function endTurn(){
  if(winner) return;
  current = (current+1)%2;
  locked = false;
  updateTurnIndicator();
}

function rand(n){ return Math.floor(Math.random()*n)+1; }

// INIT
players.forEach(place);
updateScores();
updateTurnIndicator();
</script>

</body>
</html>
