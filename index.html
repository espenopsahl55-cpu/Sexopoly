<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Sex o Pol ‚Äì Meny</title>

<style>
  :root{
    /* Juster kun denne hvis du vil ha preview litt mindre/st√∏rre */
    --preview-h: 140px;   /* f.eks 120px for mindre */
    --card-w: 520px;
    --accent: #4da6ff;
  }

  html, body{
    margin:0; padding:0;
    width:100vw; height:100dvh;
    background:#000; color:#fff;
    font-family:Arial, sans-serif;
    overflow:hidden;
    -webkit-tap-highlight-color: transparent;
  }

  /* Roter-til-liggende overlay */
  #rotateWarning{
    position: fixed;
    inset: 0;
    background: #000;
    color: #fff;
    display: none;
    justify-content: center;
    align-items: center;
    font-size: 22px;
    z-index: 999;
    text-align: center;
    padding: 24px;
  }

  /* ===== SPLASH / FORSIDE ===== */
  #splash{
    position: fixed;
    inset: 0;
    background: radial-gradient(circle at 50% 40%, rgba(77,166,255,0.18), rgba(0,0,0,0) 55%), #000;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    text-align:center;
    gap:14px;
    padding:24px;
    z-index: 500; /* under rotateWarning, over alt annet */
  }

  #splash h1{
    margin:0;
    font-size:36px;
    letter-spacing:0.5px;
  }

  #splash .byline{
    opacity:.75;
    font-size:16px;
  }

  #splash .tap{
    margin-top:14px;
    font-size:14px;
    opacity:.7;
  }

  /* liten ‚Äúpulse‚Äù p√• tap-tekst */
  @keyframes pulse {
    0%, 100% { opacity: .55; transform: translateY(0); }
    50% { opacity: .9; transform: translateY(-2px); }
  }
  #splash .tap{
    animation: pulse 1.2s infinite;
  }

  /* ===== BRETTVELGER ===== */
  #wrap{
    height:100dvh;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    gap:12px;
    padding:18px;
    box-sizing:border-box;
  }

  h2{
    margin:0;
    font-size:26px;
    text-align:center;
  }

  #previewCard{
    width: min(80vw, var(--card-w));
    border-radius:16px;
    background:#111;
    padding:12px;
    box-sizing:border-box;
    border:1px solid rgba(255,255,255,0.08);
  }

  #previewFrame{
    width:100%;
    height: var(--preview-h);
    border-radius:12px;
    overflow:hidden;
    background:#000;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  #previewImg{
    width:100%;
    height:100%;
    object-fit: contain;
    display:block;
    user-select:none;
    -webkit-user-drag:none;
    touch-action: pan-y;
  }

  #boardLabel{
    margin-top:10px;
    font-size:15px;
    opacity:.85;
    text-align:center;
  }

  #hint{
    font-size:12px;
    opacity:.6;
    text-align:center;
  }

  #dots{
    display:flex;
    gap:8px;
    justify-content:center;
    margin-top:10px;
  }
  .dot{
    width:8px; height:8px; border-radius:50%;
    background:#555;
  }
  .dot.active{ background: var(--accent); }

  .actions{
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:center;
  }

  button{
    padding:14px 22px;
    font-size:18px;
    border-radius:12px;
    border:none;
    font-weight:bold;
    cursor:pointer;
    min-height:54px;
  }
  #startBtn{
    background: var(--accent);
    color:#fff;
  }
  #startBtn:active{ transform:scale(.97); }

  .navBtn{
    background:#222;
    color:#fff;
    padding:14px 16px;
    min-width:54px;
  }
  .navBtn:active{ transform:scale(.97); }

  @media (max-width: 420px){
    :root{ --preview-h: 120px; }
    #splash h1{ font-size:32px; }
    h2{ font-size:24px; }
  }
</style>
</head>

<body>

<div id="rotateWarning">
  üîÑ Snu telefonen til liggende for √• spille
</div>

<!-- FORSIDE -->
<div id="splash" onclick="enterMenu()" role="button" aria-label="Trykk for √• fortsette">
  <h1>Welcome to Sexopol</h1>
  <div class="byline">Made by Espen Opsahl</div>
  <div class="tap">Trykk for √• fortsette</div>
</div>

<!-- BRETTVELGER -->
<div id="wrap">
  <h2>Velg spillebrett</h2>

  <div id="previewCard">
    <div id="previewFrame">
      <img id="previewImg" src="board.png" alt="Preview">
    </div>

    <div id="boardLabel"></div>
    <div id="hint">Sveip p√• bildet for √• bytte brett</div>
    <div id="dots"></div>
  </div>

  <div class="actions">
    <button class="navBtn" onclick="prevBoard()">‚óÄ</button>
    <button id="startBtn" onclick="startGame()">Start spill</button>
    <button class="navBtn" onclick="nextBoard()">‚ñ∂</button>
  </div>
</div>

<script>
  // Krev liggende
  function checkOrientationMenu(){
    const warning = document.getElementById("rotateWarning");
    const isPortrait = window.matchMedia("(orientation: portrait)").matches;
    warning.style.display = isPortrait ? "flex" : "none";
  }
  window.addEventListener("resize", checkOrientationMenu);
  checkOrientationMenu();

  // Forside -> meny
  function enterMenu(){
    // Hvis portrait: ikke g√• videre, la rotateWarning forklare
    const isPortrait = window.matchMedia("(orientation: portrait)").matches;
    if (isPortrait) return;

    document.getElementById("splash").style.display = "none";
  }

  // Brettliste
  const boards = [
    {name:"Original", file:"board.png"},
    {name:"Gr√∏nn/Lilla/Bl√•", file:"board2.png"},
    {name:"Lilla/Gr√∏nn/Gul", file:"board3.png"},
    {name:"Lilla/Gul", file:"board4.png"},
    {name:"Bl√•/Gul", file:"board5.png"},
    {name:"Lysebl√•/Gul", file:"board6.png"},
    {name:"Gr√∏nn/Gul", file:"board7.png"}
  ];

  let index = 0;

  const img = document.getElementById("previewImg");
  const label = document.getElementById("boardLabel");
  const dotsWrap = document.getElementById("dots");

  boards.forEach(() => {
    const d = document.createElement("div");
    d.className = "dot";
    dotsWrap.appendChild(d);
  });

  function updateUI(){
    img.src = boards[index].file;
    label.textContent = boards[index].name;

    document.querySelectorAll(".dot").forEach((d,i)=>{
      d.classList.toggle("active", i === index);
    });
  }

  function nextBoard(){
    index = (index + 1) % boards.length;
    updateUI();
  }
  function prevBoard(){
    index = (index - 1 + boards.length) % boards.length;
    updateUI();
  }

  // Swipe p√• preview
  let startX = 0;
  img.addEventListener("touchstart", e=>{
    startX = e.changedTouches[0].screenX;
  }, {passive:true});

  img.addEventListener("touchend", e=>{
    const diff = e.changedTouches[0].screenX - startX;
    if (diff < -50) nextBoard();
    else if (diff > 50) prevBoard();
  }, {passive:true});

  async function startGame(){
    // Valgfritt: fors√∏k √• l√•se orientation (funker ofte p√• Android, ikke iOS)
    try{
      if (screen.orientation && screen.orientation.lock){
        await screen.orientation.lock("landscape");
      }
    }catch(e){}

    const chosen = boards[index].file;
    window.location.href = "game.html?board=" + encodeURIComponent(chosen);
  }

  img.onerror = () => { img.src = "board.png"; };

  updateUI();
</script>

</body>
</html>
