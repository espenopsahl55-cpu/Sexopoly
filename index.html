<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<title>Sex O Pol (18+)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  background:#000;
  color:#fff;
  font-family:Arial, sans-serif;
  text-align:center;
  margin:0;
}
h1{ margin:10px 0 0; }

#ui{
  position:sticky;
  top:0;
  background:#000;
  z-index:20;
  padding:10px;
  border-bottom:1px solid gold;
}

#topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.score{
  border:1px solid gold;
  padding:8px 14px;
  font-size:18px;
  min-width:120px;
}

#dice{
  font-size:36px;
  margin:10px;
}

button{
  font-size:22px;
  padding:16px 30px;
  border-radius:12px;
  border:none;
  background:gold;
  color:#000;
  cursor:pointer;
}
button:active{
  transform:scale(0.95);
}

#board{
  position:relative;
  max-width:900px;
  margin:10px auto;
}
#board img{
  width:100%;
}

.token{
  width:20px;
  height:20px;
  border-radius:50%;
  position:absolute;
  transform:translate(-50%,-50%);
  transition:0.5s ease;
  z-index:5;
}
.p1{ background:pink; }
.p2{ background:lightblue; }

#log{
  max-width:900px;
  margin:10px auto;
  background:#111;
  border:1px solid gold;
  padding:10px;
  min-height:80px;
}

#card{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:50;
}
#cardContent{
  background:#111;
  border:2px solid gold;
  padding:20px;
  max-width:400px;
  font-size:22px;
}
#cardContent button{
  margin-top:15px;
  padding:10px 20px;
  font-size:16px;
}

input.player-name{
  margin:5px;
  padding:5px 10px;
  font-size:16px;
}

#turnIndicator{
  margin-top:10px;
  font-size:20px;
}
</style>
</head>
<body>

<div id="ui">
  <div id="topbar">
    <div class="score" id="score1">Spiller 1: 0 ‚≠ê</div>
    <div class="score" id="score2">Spiller 2: 0 ‚≠ê</div>
  </div>

  <h1>Sex O Pol (18+)</h1>
  <div>
    <input class="player-name" id="name1" placeholder="Spiller 1">
    <input class="player-name" id="name2" placeholder="Spiller 2">
  </div>
  <div id="dice">üé≤ <span id="d1">-</span> + <span id="d2">-</span></div>
  <button onclick="roll()">üé≤ Kast terninger</button>

  <!-- Nytt: Turn-indikator -->
  <div id="turnIndicator">‚û°Ô∏è Din tur: Spiller 1</div>
</div>

<div id="board">
  <img src="board.png">
  <div id="p1" class="token p1"></div>
  <div id="p2" class="token p2"></div>
</div>

<div id="log"></div>

<div id="card">
  <div id="cardContent">
    <div id="cardText"></div>
    <button onclick="closeCard()">OK</button>
  </div>
</div>

<script>
// ===== DOM =====
const p1 = document.getElementById("p1");
const p2 = document.getElementById("p2");
const d1 = document.getElementById("d1");
const d2 = document.getElementById("d2");
const name1Input = document.getElementById("name1");
const name2Input = document.getElementById("name2");
const card = document.getElementById("card");
const cardText = document.getElementById("cardText");
const score1 = document.getElementById("score1");
const score2 = document.getElementById("score2");
const turnIndicator = document.getElementById("turnIndicator"); // NYTT
  // ===== BRETT =====
const JAIL_POS = 20;

const tiles = [
  {x:90,y:90,type:"lust"}, {x:200,y:90,type:"drink",amount:2}, {x:310,y:90,type:"nothing"}, {x:420,y:90,type:"2points"},
  {x:530,y:90,type:"back",amount:2}, {x:640,y:90,type:"drink",amount:3}, {x:750,y:90,type:"lust"}, {x:860,y:90,type:"go_jail"},
  {x:860,y:200,type:"nothing"}, {x:860,y:310,type:"drink",amount:2}, {x:860,y:420,type:"dare"}, {x:860,y:530,type:"back",amount:2},
  {x:750,y:530,type:"nothing"}, {x:640,y:530,type:"drink",amount:1}, {x:530,y:530,type:"dare"}, {x:420,y:530,type:"2points"},
  {x:310,y:530,type:"drink",amount:2}, {x:200,y:530,type:"nothing"}, {x:90,y:530,type:"dare"},
  {x:0,y:530,type:"jail"},
  {x:0,y:420,type:"2points"}, {x:0,y:310,type:"nothing"}, {x:0,y:200,type:"drink",amount:2}, {x:0,y:90,type:"start"}
];

// ===== KORT =====
const lustCards = [
  "Kyss partneren i 20 sekunder","Mass√©r l√•rene i 1 minutt","Hvisk noe skittent",
  "Gjett favoritt reisem√•l ‚Äì feil: drikk 2 slurker","Stryk hendene p√• et valgfritt sted p√• partner i 30 sek",
  "Si favoritt sexstilling","F√• et kyss et sted du velger","Velg hvem som tar av et plagg",
  "Klin i 30 sek ‚Äì ta av partner 1 plagg","Fortell hvor du √∏nsker √• ha sex",
  "Hva var mest attraktivt ved f√∏rste m√∏te?","Stirr i √∏ynene 30 sek mens du koser l√•ret",
  "Fortell favorittegenskaper","Kyss halsen i 30 sek","Nevn 2 ting som tenner deg","Sitt i fanget til partner √©n runde"
];

const dareCards = [
  "Ta av ett plagg","Drikk 3 slurker","La partneren velge neste kort",
  "Slikk partner et sted du √∏nsker","Tease i 40 sek ‚Äì partner drikker 3 slurker",
  "Stimuler partner nedentil i 30 sek","Gi en lap dance i 40 sek",
  "Hvis naken: valgfri stilling i 3 min ‚Äì ellers 5 slurker",
  "Bind for √∏ynene ‚Äì partner overrasker i 1 min","Ta av 3 plagg og ta 2 slurker"
];

function draw(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

// ===== SPILLERE =====
let players = [
  {pos:0, el:p1, name:"Spiller 1", jailed:false, jailAttempts:0, points:0, laps:0},
  {pos:0, el:p2, name:"Spiller 2", jailed:false, jailAttempts:0, points:0, laps:0}
];
let current = 0;
let locked = false;
let winner = null; // NYTT

// ===== UI =====
function updateScores(){
  score1.textContent = `${players[0].name}: ${players[0].points} ‚≠ê`;
  score2.textContent = `${players[1].name}: ${players[1].points} ‚≠ê`;
}

// NYTT: Turindikator
function updateTurnIndicator(){
  if(winner){
    turnIndicator.textContent = `üèÜ Vinner: ${winner.name}`;
  } else {
    turnIndicator.textContent = `‚û°Ô∏è Din tur: ${players[current].name}`;
  }
}

// ===== TERNING =====
function animateDice(cb){
  let rolls = 10;
  let interval = setInterval(()=>{
    d1.textContent = rand(6);
    d2.textContent = rand(6);
    rolls--;
    if(rolls <= 0){
      clearInterval(interval);
      cb();
    }
  }, 80);
}

// ===== SPILL =====
function roll(){
  if(locked || winner) return;
  locked = true;

  players[0].name = name1Input.value || "Spiller 1";
  players[1].name = name2Input.value || "Spiller 2";
  updateScores();
  updateTurnIndicator(); // NYTT

  animateDice(()=>{
    let d1val = rand(6), d2val = rand(6);
    d1.textContent = d1val;
    d2.textContent = d2val;

    let p = players[current];

    if(p.jailed){
      if(d1val === 6 || d2val === 6){
        p.jailed = false;
        p.jailAttempts = 0;
        move(d1val + d2val);
      } else {
        p.jailAttempts++;
        if(p.jailAttempts === 1) showCard("üöì Fengsel","Ingen 6 ‚Äì ta 2 slurker");
        else if(p.jailAttempts === 2) showCard("üöì Fengsel","Ingen 6 ‚Äì ta 4 slurker");
        else{
          p.jailed = false;
          p.jailAttempts = 0;
          move(d1val + d2val);
          return;
        }
        endTurn();
      }
      return;
    }

    move(d1val + d2val);
  });
}

function move(steps){
  let p = players[current];
  let i = 0;

  let stepAnim = setInterval(()=>{
    let oldPos = p.pos;
    p.pos = (p.pos + 1) % tiles.length;

    if(oldPos === tiles.length - 1 && p.pos === 0){
      p.laps++;
      if(p.laps === 6 && !winner){
        winner = p;
        showCard("üéÜ Gratulerer!", `${p.name}, du har vunnet ‚Äì gratulerer!üéÜ`);
        locked = true;
        clearInterval(stepAnim);
        updateTurnIndicator(); // NYTT
        return;
      }
    }

    place(p);
    i++;
    if(i >= steps){
      clearInterval(stepAnim);
      resolve(tiles[p.pos]);
    }
  }, 300);
}

function place(p){
  let t = tiles[p.pos];
  p.el.style.left = t.x + "px";
  p.el.style.top = t.y + "px";
}

function resolve(tile){
  let p = players[current];

  if(tile.type === "go_jail"){
    p.pos = JAIL_POS;
    p.jailed = true;
    p.jailAttempts = 0;
    place(p);
    showCard("üöì Fengsel","Du sendes rett i fengsel!");
    return;
  }

  if(tile.type === "2points"){
    p.points += 2;
    updateScores();
    showCard("‚≠ê Poeng", "Du f√•r 2 poeng!<br><br>3p = 2 slurker<br>4p = Massasje<br>7p = Ta av plagg");
    return;
  }

  if(tile.type === "lust") showCard("‚≠ê Lust", draw(lustCards));
  else if(tile.type === "dare") showCard("üî• Dare", draw(dareCards));
  else if(tile.type === "drink") showCard("üç∫ Drikk", `Ta ${tile.amount} slurker`);
  else if(tile.type === "back"){
    showCard("‚¨Ö Tilbake", `G√• ${tile.amount} ruter tilbake`);
    p.pos -= tile.amount;
    if(p.pos < 0) p.pos += tiles.length;
    place(p);
  } else endTurn();
}

function showCard(title,text){
  cardText.innerHTML=`<h2>${title}</h2><p>${text}</p>`;
  card.style.display="flex";
}

function closeCard(){
  card.style.display="none";
  endTurn();
}

function endTurn(){
  if(winner) return;
  current = (current + 1) % 2;
  locked = false;
  updateTurnIndicator(); // NYTT
}

function rand(n){ return Math.floor(Math.random()*n)+1; }

players.forEach(place);
updateScores();
updateTurnIndicator(); // NYTT
</script>
</body>
</html>
