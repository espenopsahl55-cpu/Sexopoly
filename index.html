<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>Sex o Pol</title>

<style>
  /* ===== BASE ===== */
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    background: #000;
    font-family: Arial, sans-serif;
    color: white;
    overflow: hidden;
    -webkit-tap-highlight-color: transparent;
  }
  * {
    touch-action: manipulation;
    box-sizing: border-box;
  }

  body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    flex-direction: column;
  }

  /* ===== LAYOUT ===== */
  #gameWrapper {
    display: flex;
    flex-direction: row;
    gap: 16px;
    align-items: flex-start;
    width: 95vw;
    max-width: 1000px;
  }

  /* ===== BRETT ===== */
  #board {
    position: relative;
    width: 70vw;
    max-width: 700px;
    aspect-ratio: 950 / 620;
    background: url("board.png") center/contain no-repeat;
    flex-shrink: 0;
    border: 2px solid #fff;
    border-radius: 12px;
  }

  /* ===== SPILLERBRIKKER ===== */
  .player {
    position: absolute;
    width: 6vw;
    max-width: 40px;
    height: 6vw;
    max-height: 40px;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: left 0.3s ease, top 0.3s ease;
    z-index: 10;
    border: 2px solid #fff;
  }
  #p1 { background: #ff4d4d; }
  #p2 { background: #4da6ff; }

  /* ===== SIDE UI ===== */
  #sideUI {
    width: 28vw;
    max-width: 280px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  input, button {
    padding: 10px;
    font-size: 16px;
    border-radius: 6px;
    border: none;
  }

  input:focus {
    outline: 2px solid #4da6ff;
  }

  button {
    cursor: pointer;
    font-weight: bold;
    min-height: 50px;
    background: #4da6ff;
    color: white;
    transition: background 0.3s;
  }
  button:hover {
    background: #3a85cc;
  }

  #dice {
    display: flex;
    gap: 12px;
    font-size: 36px;
    user-select: none;
    justify-content: center;
  }

  #scores {
    font-size: 18px;
  }

  #turnIndicator {
    font-weight: bold;
    margin-bottom: 6px;
    text-align: center;
  }

  /* ===== KORT ===== */
  #card {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 50;
  }

  #cardContent {
    background: #111;
    padding: 22px;
    max-width: 90vw;
    text-align: center;
    border-radius: 12px;
    color: white;
  }

  /* ===== MOBIL TILPASNING (st√•ende) ===== */
  @media (max-width: 600px) {
    #gameWrapper {
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    #board {
      width: 95vw;
      aspect-ratio: 950 / 620;
    }

    #sideUI {
      width: 95vw;
    }

    .player {
      width: 9vw;
      height: 9vw;
    }

    #dice {
      font-size: 28px;
    }

    input, button {
      font-size: 16px;
      padding: 12px;
    }

    #name1Input,
    #name2Input {
      width: 70%;
      align-self: center;
    }
  }

  /* ===== MOBIL TILPASNING (liggende / bredere mobil som iPhone 16) ===== */
  @media (max-width: 900px) and (orientation: landscape) {
    #gameWrapper {
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    #board {
      width: 90vw;
      aspect-ratio: 950 / 620;
    }

    #sideUI {
      width: 90vw;
    }

    .player {
      width: 8vw;
      height: 8vw;
    }

    #dice {
      font-size: 30px;
    }

    input, button {
      font-size: 17px;
      padding: 12px;
    }

    #name1Input,
    #name2Input {
      width: 65%;
      align-self: center;
    }
  }
</style>
</head>

<body>
  <div id="gameWrapper">

    <div id="board">
      <div id="p1" class="player"></div>
      <div id="p2" class="player"></div>
    </div>

    <div id="sideUI">
      <input id="name1Input" placeholder="Spiller 1" autocomplete="off" />
      <input id="name2Input" placeholder="Spiller 2" autocomplete="off" />

      <div id="scores">
        <div id="score1"></div>
        <div id="score2"></div>
      </div>

      <div id="turnIndicator"></div>

      <div id="dice">
        <div id="d1" aria-label="Terning 1" role="img">üé≤</div>
        <div id="d2" aria-label="Terning 2" role="img">üé≤</div>
      </div>

      <button id="rollBtn" onclick="roll()">Kast terning</button>
    </div>

  </div>

  <!-- ===== KORT ===== -->
  <div id="card" onclick="closeCard()">
    <div id="cardContent">
      <div id="cardText"></div>
      <p><small>(Trykk for √• fortsette)</small></p>
    </div>
  </div>

<script>
  // ===== KONSTANTER =====
  const JAIL_POS = 20;

  const tiles = [
    {x:9.5,y:14.5,type:"lust"},
    {x:21,y:14.5,type:"drink",amount:2},
    {x:32,y:14.5,type:"nothing"},
    {x:43,y:14.5,type:"2points"},
    {x:54,y:14.5,type:"back",amount:2},
    {x:65,y:14.5,type:"drink",amount:3},
    {x:76,y:14.5,type:"lust"},
    {x:87,y:14.5,type:"go_jail"},
    {x:87,y:31,type:"nothing"},
    {x:87,y:48,type:"drink",amount:2},
    {x:87,y:65,type:"dare"},
    {x:87,y:82,type:"back",amount:2},
    {x:76,y:82,type:"nothing"},
    {x:65,y:82,type:"drink",amount:1},
    {x:54,y:82,type:"dare"},
    {x:43,y:82,type:"2points"},
    {x:32,y:82,type:"drink",amount:2},
    {x:21,y:82,type:"nothing"},
    {x:9.5,y:82,type:"dare"},
    {x:0,y:82,type:"jail"},
    {x:0,y:65,type:"2points"},
    {x:0,y:48,type:"nothing"},
    {x:0,y:31,type:"drink",amount:2},
    {x:0,y:14.5,type:"start"}
  ];

  const lustCards = [
    "Kyss partneren i 20 sekunder","Mass√©r l√•rene i 1 minutt","Hvisk noe skittent",
    "Gjett favoritt reisem√•l ‚Äì feil: drikk 2 slurker","Stryk hendene p√• et valgfritt sted p√• partner i 30 sek",
    "Si favoritt sexstilling","F√• et kyss et sted du velger","Velg hvem som tar av et plagg",
    "Klin i 30 sek ‚Äì ta av partner 1 plagg","Fortell hvor du √∏nsker √• ha sex",
    "Hva var mest attraktivt ved f√∏rste m√∏te?","Stirr i √∏ynene 30 sek mens du koser l√•ret",
    "Fortell favorittegenskaper","Kyss halsen i 30 sek","Nevn 2 ting som tenner deg","Sitt i fanget til partner √©n runde"
  ];

  const dareCards = [
    "Ta av ett plagg","Drikk 3 slurker","La partneren velge neste kort",
    "Slikk partner et sted du √∏nsker","Tease i 40 sek ‚Äì partner drikker 3 slurker",
    "Stimuler partner nedentil i 30 sek","Gi en lap dance i 40 sek",
    "Hvis naken: valgfri stilling i 3 min ‚Äì ellers 5 slurker",
    "Bind for √∏ynene ‚Äì partner overrasker i 1 min","Ta av 3 plagg og ta 2 slurker"
  ];

  let players = [
    {pos:0, el:null, name:"Spiller 1", jailed:false, jailAttempts:0, points:0, laps:0},
    {pos:0, el:null, name:"Spiller 2", jailed:false, jailAttempts:0, points:0, laps:0}
  ];

  let current = 0;
  let locked = false;
  let winner = null;

  const p1 = document.getElementById("p1");
  const p2 = document.getElementById("p2");
  const score1 = document.getElementById("score1");
  const score2 = document.getElementById("score2");
  const turnIndicator = document.getElementById("turnIndicator");
  const d1 = document.getElementById("d1");
  const d2 = document.getElementById("d2");
  const card = document.getElementById("card");
  const cardText = document.getElementById("cardText");
  const name1Input = document.getElementById("name1Input");
  const name2Input = document.getElementById("name2Input");

  players[0].el = p1;
  players[1].el = p2;

  function place(p) {
    const t = tiles[p.pos];
    const board = document.getElementById("board");
    p.el.style.left = (board.clientWidth * t.x / 100) + "px";
    p.el.style.top = (board.clientHeight * t.y / 100) + "px";
  }

  function updateScores() {
    score1.textContent = `${players[0].name}: ${players[0].points} ‚≠ê`;
    score2.textContent = `${players[1].name}: ${players[1].points} ‚≠ê`;
  }

  function updateTurnIndicator() {
    turnIndicator.textContent = winner
      ? `üèÜ Vinner: ${winner.name}`
      : `‚û°Ô∏è Din tur: ${players[current].name}`;
  }

  function draw(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
  }

  function animateDice(cb) {
    let rolls = 12;
    let d1val = 1, d2val = 1;

    const interval = setInterval(() => {
      d1val = rand(6);
      d2val = rand(6);
      d1.textContent = d1val;
      d2.textContent = d2val;
      rolls--;

      if (rolls === 0) {
        clearInterval(interval);
        setTimeout(() => {
          cb(d1val, d2val);
          if (navigator.vibrate) navigator.vibrate(50);
        }, 150);
      }
    }, 90);
  }

  function roll() {
    if (locked || winner) return;
    locked = true;

  // === samme ===   (JavaScript videre uendret)...
  players[0].name = name1Input.value.trim() || "Spiller 1";
    players[1].name = name2Input.value.trim() || "Spiller 2";

    updateScores();
    updateTurnIndicator();

    animateDice((d1val, d2val) => {
      const p = players[current];

      if (p.jailed) {
        if (d1val === 6 || d2val === 6) {
          p.jailed = false;
          p.jailAttempts = 0;
          move(d1val + d2val);
        } else {
          p.jailAttempts++;
          showCard("üöì Fengsel", `Ingen 6 ‚Äì ta ${p.jailAttempts * 2} slurker`);
          endTurn();
        }
        return;
      }

      move(d1val + d2val);
    });
  }

  function move(steps) {
    const p = players[current];
    let moved = 0;

    const stepAnim = setInterval(() => {
      const oldPos = p.pos;
      p.pos = (p.pos + 1) % tiles.length;

      if (oldPos === tiles.length - 1 && p.pos === 0) {
        p.laps++;
        if (p.laps === 6 && !winner) {
          winner = p;
          showCard("üéÜ Gratulerer!", `${p.name} har vunnet!`);
          clearInterval(stepAnim);
          updateTurnIndicator();
          return;
        }
      }

      place(p);

      moved++;
      if (moved >= steps) {
        clearInterval(stepAnim);
        resolve(tiles[p.pos]);
      }
    }, 300);
  }

  function resolve(tile) {
    const p = players[current];

    switch(tile.type) {
      case "go_jail":
        p.pos = JAIL_POS;
        p.jailed = true;
        p.jailAttempts = 0;
        place(p);
        showCard("üöì Fengsel", "Du sendes rett i fengsel!");
        break;

      case "2points":
        p.points += 2;
        updateScores();
        showCard("‚≠ê Poeng", "Du f√•r 2 poeng!");
        break;

      case "lust":
        showCard("‚≠ê Lust", draw(lustCards));
        break;

      case "dare":
        showCard("üî• Dare", draw(dareCards));
        break;

      case "drink":
        showCard("üç∫ Drikk", `Ta ${tile.amount} slurker`);
        break;

      case "back":
        showCard("‚¨Ö Tilbake", `G√• ${tile.amount} ruter tilbake`);
        p.pos = (p.pos - tile.amount + tiles.length) % tiles.length;
        place(p);
        break;

      default:
        endTurn();
        break;
    }
  }

  function showCard(title, text) {
    cardText.innerHTML = `<h2>${title}</h2><p>${text}</p>`;
    card.style.display = "flex";
  }

  function closeCard() {
    card.style.display = "none";
    endTurn();
  }

  function endTurn() {
    if (winner) return;
    current = (current + 1) % players.length;
    locked = false;
    updateTurnIndicator();
  }

  function rand(n) {
    return Math.floor(Math.random() * n) + 1;
  }

  // ===== INIT =====
  players.forEach(place);
  updateScores();
  updateTurnIndicator();
</script>
</body>
</html>
